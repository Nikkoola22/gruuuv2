import{r as c,j as e,a as S,R as w}from"./index-Debt2K4I.js";const R=()=>{const[n,o]=c.useState([]),[s,d]=c.useState(!0);return c.useEffect(()=>{(()=>{try{const m=localStorage.getItem("cfdt-news-items");o(m?JSON.parse(m):[]),d(!1)}catch{o([]),d(!1)}})()},[]),s?e.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[e.jsx("h1",{children:"ðŸ“° DerniÃ¨res actualitÃ©s"}),e.jsx("p",{children:"Chargement des actualitÃ©s..."})]}):e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("h1",{children:"ðŸ“° DerniÃ¨res actualitÃ©s"}),n.length===0?e.jsx("div",{style:{background:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"8px",padding:"1rem",color:"#1565c0"},children:e.jsxs("p",{children:["Aucune actualitÃ© pour le moment. Allez dans ",e.jsx("strong",{children:"âš™ï¸ ActualitÃ©s API"})," pour en ajouter."]})}):e.jsx("ul",{children:n.map(a=>e.jsxs("li",{style:{marginBottom:"1rem",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px"},children:[e.jsx("h3",{children:a.title}),e.jsx("p",{children:a.content})]},a.id))})]})},k=()=>{const[n,o]=c.useState({url:"",enabled:!1}),[s,d]=c.useState(null);c.useEffect(()=>{a()},[]);const a=()=>{const l=localStorage.getItem("rssConfig");l&&o(JSON.parse(l))},m=l=>{localStorage.setItem("rssConfig",JSON.stringify(l)),o(l)},u=async l=>{try{d("Test en cours...");const p=await fetch("https://api.allorigins.win/get?url="+encodeURIComponent(l));if(!p.ok)throw new Error(`Erreur ${p.status}: ${p.statusText}`);const x=(await p.json()).contents,f=new DOMParser().parseFromString(x,"text/xml").querySelectorAll("item");f.length>0?d(`âœ… Flux RSS valide ! ${f.length} articles trouvÃ©s.`):d("âš ï¸ Flux RSS valide mais aucun article trouvÃ©.")}catch(g){d(`âŒ Erreur: ${g instanceof Error?g.message:"Flux RSS invalide"}`)}};return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("h1",{children:"âš™ï¸ Administration des actualitÃ©s"}),e.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:[e.jsx("h2",{children:"ðŸ“¡ Configuration du flux RSS"}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Configurez un flux RSS personnalisÃ© qui remplacera le flux par dÃ©faut dans l'application principale."}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"URL du flux RSS :"}),e.jsx("input",{type:"url",placeholder:"https://example.com/rss.xml",value:n.url,onChange:l=>o({...n,url:l.target.value}),style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ccc",borderRadius:"4px"}})]}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:n.enabled,onChange:l=>o({...n,enabled:l.target.checked})}),"Activer ce flux RSS"]})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("button",{type:"button",onClick:()=>u(n.url),disabled:!n.url,style:{padding:"0.5rem 1rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:n.url?"pointer":"not-allowed",opacity:n.url?1:.5},children:"Tester le flux"}),e.jsx("button",{type:"button",onClick:()=>m(n),style:{padding:"0.5rem 1rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sauvegarder"})]}),s&&e.jsx("div",{style:{padding:"0.5rem",backgroundColor:s.includes("âœ…")?"#d4edda":s.includes("âŒ")?"#f8d7da":"#fff3cd",border:`1px solid ${s.includes("âœ…")?"#c3e6cb":s.includes("âŒ")?"#f5c6cb":"#ffeaa7"}`,borderRadius:"4px",color:s.includes("âœ…")?"#155724":s.includes("âŒ")?"#721c24":"#856404"},children:s})]}),e.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"8px"},children:[e.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#1976d2"},children:"â„¹ï¸ Information"}),e.jsx("p",{style:{margin:0,color:"#1565c0"},children:`Cette page vous permet de configurer un flux RSS personnalisÃ© qui remplacera le flux par dÃ©faut dans l'application principale. Le flux configurÃ© sera utilisÃ© dans le bandeau "ActualitÃ©s nationales".`})]})]})},j=()=>{const[n,o]=c.useState([]),[s,d]=c.useState({title:"",content:""}),[a,m]=c.useState(null),[u,l]=c.useState(()=>{const t=localStorage.getItem("primes-blocked");return t?JSON.parse(t):!1}),g=()=>{const t=!u;l(t),localStorage.setItem("primes-blocked",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("primes-blocked-changed",{detail:t}))};c.useEffect(()=>{const t=localStorage.getItem("cfdt-info-items");if(t)o(JSON.parse(t));else{const r=[{id:1,title:"Accident de trajet : oÃ¹ commence le trajet domicile-travail lorsqu'un agent rÃ©side dans un immeuble collectif ?",content:"Le trajet domicile-travail commence dÃ¨s la sortie de l'immeuble collectif oÃ¹ rÃ©side l'agent. Cela inclut les parties communes de l'immeuble (hall, escaliers, ascenseur) jusqu'Ã  la voie publique. En cas d'accident dans ces espaces communs, celui-ci peut Ãªtre reconnu comme accident de trajet si l'agent se rendait effectivement au travail ou en revenait."},{id:2,title:"Un fonctionnaire territorial peut-il demander une mutation tout en Ã©tant en disponibilitÃ© ?",content:"Dans la fonction publique territoriale, un fonctionnaire placÃ© en disponibilitÃ© ne peut pas Ãªtre mutÃ© directement puisqu'il n'est pas en position d'activitÃ©. Toutefois, il lui reste possible de prÃ©parer sa mobilitÃ© et de poser sa candidature Ã  une mutation, Ã  condition de respecter la procÃ©dure adaptÃ©e. Ce cadre juridique doit Ãªtre bien compris par les services RH afin d'accompagner correctement les agents."},{id:3,title:"Repenser le recrutement pour une fonction publique plus inclusive.",content:"La fonction publique territoriale s'engage vers plus d'inclusivitÃ© en diversifiant ses mÃ©thodes de recrutement. Cela passe par l'adaptation des Ã©preuves pour les personnes en situation de handicap, la valorisation de l'expÃ©rience professionnelle via la reconnaissance des acquis, et le dÃ©veloppement de parcours d'insertion pour favoriser l'Ã©galitÃ© des chances dans l'accÃ¨s aux emplois publics."},{id:4,title:"Entretien avec son chef: accident de service?.",content:"La circonstance qu'un chef de service, recevant en entretien individuel l'un de ses agents, ait pu adresser Ã  ce dernier plusieurs reproches sur sa maniÃ¨re de servir et s'Ã©nerver en lui reprochant notamment Â« tricher sur ses horaires de travail Â», n'est pas constitutive d'un accident de service, dÃ¨s lors que la restitution de cet entretien par l'intÃ©ressÃ© ne fait apparaitre aucun propos ou comportement excÃ©dant l'exercice normal du pouvoir hiÃ©rarchique de ce supÃ©rieur.TA BesanÃ§on 2400131 du 19.06.2025."},{id:5,title:"Sanction: Utilisation WhatApp.",content:"La circonstance qu'un agent ait envoyÃ© depuis son tÃ©lÃ©phone personnel et sa messagerie WhatsApp, Ã  l'attention de plusieurs personnes, dont des Ã©lus, des photos montages assortis de sous-titre dÃ©shonorants Ã  l'encontre de la maire de la ville et de son troisiÃ¨me adjoint, prÃ©sente un caractÃ¨re fautif et non humoristique, compte-tenu de la nature des photographies diffusÃ©es et des personnes visÃ©es par ces montages. Par suite, le comportement de l'intÃ©ressÃ© constitue un manquement Ã  son obligation de dignitÃ©, de rÃ©serve de probitÃ©, d'intÃ©gritÃ© et de loyautÃ©, justifiant son exclusion de fonctions durant deux ans. La circonstance que les messages incriminÃ©s soient provenus de la messagerie privÃ©e de l'intÃ©ressÃ© et en dehors du service est sans incidence dÃ¨s lors que le comportement d'un agent public peut avoir pour effet de perturber le service ou de jeter le discrÃ©dit sur l'administration, comme en l'espÃ¨ce.TA Cergy-Pontoise 2201748 du 09.07.2025."}];o(r),localStorage.setItem("cfdt-info-items",JSON.stringify(r))}},[]);const p=t=>{o(t),localStorage.setItem("cfdt-info-items",JSON.stringify(t))},h=t=>{if(t.preventDefault(),a){const r=n.map(i=>i.id===a?{...s,id:a}:i);p(r)}else{const r=Math.max(...n.map(v=>v.id),0)+1,i=[...n,{...s,id:r}];p(i)}d({title:"",content:""}),m(null)},x=t=>{d({title:t.title,content:t.content}),m(t.id)},b=t=>{const r=n.filter(i=>i.id!==t);p(r)},f=t=>{const r=n.findIndex(i=>i.id===t);if(r>0){const i=[...n];[i[r-1],i[r]]=[i[r],i[r-1]],p(i)}},y=t=>{const r=n.findIndex(i=>i.id===t);if(r<n.length-1){const i=[...n];[i[r],i[r+1]]=[i[r+1],i[r]],p(i)}};return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsx("h1",{children:"ðŸ“° Administration des informations NEWS FPT"}),e.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",background:u?"#ffebee":"#e8f5e9",border:`2px solid ${u?"#f44336":"#4caf50"}`,borderRadius:"8px",textAlign:"center"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem"},children:"ðŸ”’ ContrÃ´le du bouton PRIMES"}),e.jsxs("p",{style:{marginBottom:"1rem",color:"#666"},children:["Ã‰tat actuel : ",e.jsx("strong",{children:u?"ðŸ”’ BLOQUÃ‰":"ðŸ”“ DÃ‰VERROUILLÃ‰"})]}),e.jsx("button",{onClick:g,style:{padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"bold",color:"white",background:u?"#f44336":"#4caf50",border:"none",borderRadius:"6px",cursor:"pointer",transition:"background 0.3s"},onMouseOver:t=>t.currentTarget.style.background=u?"#d32f2f":"#388e3c",onMouseOut:t=>t.currentTarget.style.background=u?"#f44336":"#4caf50",children:u?"ðŸ”“ DÃ©bloquer PRIMES":"ðŸ”’ Bloquer PRIMES"})]}),e.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:'GÃ©rez les informations qui apparaissent dans le bandeau dÃ©roulant "NEWS FPT"'}),e.jsxs("form",{onSubmit:h,style:{marginBottom:"2rem",background:"#f9f9f9",padding:"1.5rem",borderRadius:"8px"},children:[e.jsxs("h2",{children:[a?"Modifier":"Ajouter"," une information"]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Titre (affichÃ© dans le bandeau) :"}),e.jsx("input",{type:"text",placeholder:"Titre de l'information",value:s.title,onChange:t=>d({...s,title:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px"},required:!0})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Contenu dÃ©taillÃ© (affichÃ© dans la popup) :"}),e.jsx("textarea",{placeholder:"Contenu dÃ©taillÃ© de l'information",value:s.content,onChange:t=>d({...s,content:t.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",height:"120px"},required:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"submit",style:{padding:"0.75rem 1.5rem",background:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:a?"Modifier":"Ajouter"}),a&&e.jsx("button",{type:"button",onClick:()=>{d({title:"",content:""}),m(null)},style:{padding:"0.75rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Annuler"})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{children:["Informations existantes (",n.length,")"]}),n.length===0?e.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"Aucune information pour le moment."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map((t,r)=>e.jsx("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",background:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{margin:"0 0 0.5rem 0",color:"#333"},children:["#",t.id,": ",t.title]}),e.jsx("p",{style:{margin:"0",color:"#666",fontSize:"0.9em",lineHeight:"1.4"},children:t.content.length>150?`${t.content.substring(0,150)}...`:t.content})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginLeft:"1rem"},children:[e.jsx("button",{onClick:()=>x(t),style:{padding:"0.25rem 0.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8em"},children:"Modifier"}),e.jsx("button",{onClick:()=>b(t.id),style:{padding:"0.25rem 0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8em"},children:"Supprimer"}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{onClick:()=>f(t.id),disabled:r===0,style:{padding:"0.25rem 0.5rem",background:r===0?"#ccc":"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:r===0?"not-allowed":"pointer",fontSize:"0.8em"},children:"â†‘"}),e.jsx("button",{onClick:()=>y(t.id),disabled:r===n.length-1,style:{padding:"0.25rem 0.5rem",background:r===n.length-1?"#ccc":"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:r===n.length-1?"not-allowed":"pointer",fontSize:"0.8em"},children:"â†“"})]})]})]})},t.id))})]})]})},C=()=>{const[n,o]=c.useState("admin-info"),s=()=>{switch(n){case"news":return e.jsx(R,{});case"admin-news":return e.jsx(k,{});case"admin-info":return e.jsx(j,{});default:return e.jsx(j,{})}};return e.jsxs("div",{style:{minHeight:"100vh",background:"#f5f5f5"},children:[e.jsx("nav",{style:{padding:"1rem",background:"#2c3e50",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",alignItems:"center",gap:"2rem"},children:[e.jsx("h1",{style:{margin:0,fontSize:"1.5rem"},children:"ðŸ”§ Administration CFDT"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>o("news"),style:{color:"white",textDecoration:"none",padding:"0.5rem 1rem",borderRadius:"4px",background:n==="news"?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.1)",border:"none",cursor:"pointer",fontSize:"1rem"},children:"ðŸ“° ActualitÃ©s"}),e.jsx("button",{onClick:()=>o("admin-news"),style:{color:"white",textDecoration:"none",padding:"0.5rem 1rem",borderRadius:"4px",background:n==="admin-news"?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.1)",border:"none",cursor:"pointer",fontSize:"1rem"},children:"âš™ï¸ ActualitÃ©s API"}),e.jsx("button",{onClick:()=>o("admin-info"),style:{color:"white",textDecoration:"none",padding:"0.5rem 1rem",borderRadius:"4px",background:n==="admin-info"?"rgba(255,255,255,0.3)":"rgba(255,255,255,0.1)",border:"none",cursor:"pointer",fontSize:"1rem"},children:"ðŸ“‹ NEWS FPT"})]})]})}),e.jsx("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},children:s()})]})};S.createRoot(document.getElementById("admin-root")).render(e.jsx(w.StrictMode,{children:e.jsx(C,{})}));
